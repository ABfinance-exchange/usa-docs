---
title: 查詢歷史訂單
sidebar_label: 查詢歷史訂單 (2年)
sidebar_position: 6
---

獲取歷史訂單紀錄. 由於訂單創建/撤銷是**異步**的, 該接口返回數據可能會有延遲. 若您想實時獲取訂單信息, 您可以查詢該[接口](open-order#)或者通過websocket推送(推薦)

:::tip
* **7天內的訂單**: <br/>支持查詢**除了**"Cancelled"(完全取消), "Rejected", "Deactivated"以外的[終態訂單](../enum#orderstatus)
* **24小時的订单**: <br/>對於完全取消(Cancelled),以及"Rejected", "Deactivated"的訂單僅支持查詢過去24小時的訂單記錄
* **7天外的訂單**: 所有账户都只能查詢到有過成交的訂單, 即完全成交, 部分成交但最終取消的訂單
:::

### HTTP請求
GET `/v5/order/history`

### 請求參數
| 參數 | 是否必需 | 類型 | 說明|
|:----- |:-------|:-----|------ |
|[category](../enum#category) |**true** |string |產品類型 `spot`|
|symbol |false |string |合約名稱|
|baseCoin |false |string |交易幣種|
|settleCoin |false |string |結算幣種|
|orderId |false |string |訂單ID |
|orderLinkId |false |string |用戶自定義訂單ID |
|orderFilter |false |string |`Order`: 普通單, `StopOrder`: 條件單, 支持現貨<br/>`tpslOrder`: 現貨止盈止損單, `OcoOrder`: OCO訂單<br/>`BidirectionalTpslOrder`: 現貨雙向止盈止損訂單 <ul><li>默認返回全部類型訂單</li></ul>|
|[orderStatus](../enum#orderstatus) |false |string |訂單狀態, 不傳則默認查詢所有終態訂單|
|startTime |false |integer |開始時間戳 (毫秒) <ul><li>startTime 和 endTime都不傳入, 則默認返回最近7天的數據</li><li>startTime 和 endTime都傳入的話, 則確保endTime - startTime <= 7天</li><li>若只傳startTime，則查詢startTime和startTime+7天的數據</li><li>若只傳endTime，則查詢endTime-7天和endTime的數據</li></ul>|
|endTime |false |integer |結束時間戳 (毫秒) |
|limit |false |integer |每頁數量限制. [`1`, `50`]. 默認: `20`|
|cursor |false |string |游標，用於翻頁|

### 響應參數
| 參數 | 類型 | 說明|
|:----- |:-----|------ |
|category |string |產品類型 |
|list |array |Object |
|> orderId  |string |訂單Id |
|> orderLinkId |string |用戶自定義Id |
|> blockTradeId  |string |大宗交易訂單Id |
|> symbol |string |合約名稱 |
|> price |string |訂單價格 |
|> qty |string |訂單數量 |
|> side |string |方向. `Buy`,`Sell`|
|> isLeverage |string |是否借貸. 僅`spot`有效<li>`0`: 否</li><li>`1`: 是</li>|
|> [positionIdx](../enum#positionidx) |integer |倉位標識。用戶不同倉位模式|
|> [orderStatus](../enum#orderstatus) |string |訂單狀態 |
|> [cancelType](../enum#canceltype) |string |訂單被取消類型 |
|> [rejectReason](../enum#rejectreason) |string |拒絕原因|
|> avgPrice |string |訂單平均成交價格 <li>不存在avg price場景的訂單將會返回`""`</li>|
|> leavesQty |string |訂單剩餘未成交的數量|
|> leavesValue |string |訂單剩餘未成交的價值|
|> cumExecQty |string |訂單累計成交數量 |
|> cumExecValue |string |訂單累計成交價值|
|> cumExecFee |string |已棄用. 用`cumFeeDetail`替代.|
|> [timeInForce](../enum#timeinforce) |string |執行策略 |
|> [orderType](../enum#ordertype) |string |訂單類型. `Market`,`Limit`. 對於止盈止損單, 則表示為觸發後的訂單類型 |
|> [stopOrderType](../enum#stopordertype) |string |條件單類型 |
|> orderIv |string |隱含波動率 |
|> marketUnit |string |現貨交易時給入參`qty`選擇的單位. `baseCoin`, `quoteCoin` |
|> slippageToleranceType |string |市價單滑點容差類型, `TickSize`, `Percent`, `UNKNOWN`(默認值)|
|> slippageTolerance |string |滑點容差數值|
|> triggerPrice |string |觸發價格. 若`stopOrderType`=_TrailingStop_, 則這是激活價格. 否則, 它是觸發價格 |
|> takeProfit |string |止盈價格 |
|> stopLoss |string |止損價格 |
|> ocoTriggerBy |string |現貨OCO訂單的觸發類型.`OcoTriggerByUnknown`, `OcoTriggerByTp`, `OcoTriggerBySl`|
|> tpLimitPrice |string |觸發止盈後轉換為限價單的價格 |
|> slLimitPrice |string |觸發止損後轉換為限價單的價格 |
|> [tpTriggerBy](../enum#triggerby) |string |觸發止盈的價格類型 |
|> [slTriggerBy](../enum#triggerby) |string |觸發止損的價格類型 |
|> triggerDirection |integer |觸發方向. `1`: 上漲, `2`: 下跌 |
|> [triggerBy](../enum#triggerby) |string |觸發價格的觸發類型 |
|> lastPriceOnCreated |string |下單時的市場價格, 現貨不適用 |
|> basePrice |string |下單時的市場價格, 僅現貨有這個字段 |
|> reduceOnly |boolean |只減倉. `true`表明這是只減倉單 |
|> closeOnTrigger |boolean |觸發後平倉委託.|
|> placeType |string |下單類型, 僅期權使用. `iv`, `price`|
|> [smpType](../enum#smptype) |string |SMP執行類型|
|> smpGroup |integer |所屬Smp組ID. 如果uid不屬於任何組, 則默認為`0` |
|> smpOrderId |string |觸發此SMP執行的交易對手的 orderID|
|> createdTime |string |創建訂單的時間戳 (毫秒) |
|> updatedTime |string |訂單更新的時間戳 (毫秒) |
|> extraFees |string |交易費率。字段枚舉: [feeType](../enum#extrafeesfeetype), [subFeeType](../enum#extrafeessubfeetype) |
|> cumFeeDetail |json |累積交易費詳情, 替代`cumExecFee`|


---

### 請求示例

<Tabs groupId="programming-languages">
<TabItem value="http" label="HTTP">

```http
GET /v5/order/history?category=spot&limit=1 HTTP/1.1
Host: api-testnet.abfinance.com
X-BAPI-SIGN: XXXXX
X-BAPI-API-KEY: xxxxxxxxxxxxxxxxxx
X-BAPI-TIMESTAMP: 1672221263407
X-BAPI-RECV-WINDOW: 5000
```

</TabItem>

</Tabs>

### 響應示例

```json
{
    "retCode": 0,
    "retMsg": "OK",
    "result": {
        "nextPageCursor": "2136971491248839936%3A1769482853263%2C2134289274911464704%3A1769163108158",
        "category": "spot",
        "list": [
            {
                "symbol": "ETHUSDT",
                "orderType": "Limit",
                "orderLinkId": "2136971491248839937",
                "slLimitPrice": "0",
                "orderId": "2136971491248839936",
                "stopOrderType": "",
                "takeProfit": "3000",
                "smpType": "None",
                "rejectReason": "EC_PerCancelRequest",
                "price": "2000.00",
                "orderIv": "",
                "createdTime": "1769482853263",
                "tpTriggerBy": "",
                "positionIdx": 0,
                "timeInForce": "GTC",
                "leavesValue": "0",
                "basePrice": "2000.11",
                "updatedTime": "1769482863857",
                "smpGroup": 0,
                "tpLimitPrice": "0",
                "trailingValue": "0",
                "slTriggerBy": "",
                "slippageToleranceType": "UNKNOWN",
                "placeType": "",
                "cumExecQty": "0",
                "reduceOnly": false,
                "activationPrice": "0",
                "qty": "1.0000",
                "smpOrderId": "",
                "extraFees": "",
                "cancelType": "CancelByUser",
                "avgPrice": "",
                "lastPriceOnCreated": "",
                "orderStatus": "Cancelled",
                "cumExecValue": "0.000000",
                "triggerDirection": 0,
                "blockTradeId": "",
                "cumFeeDetail": {},
                "isLeverage": "0",
                "trailingPercentage": "0",
                "side": "Buy",
                "triggerPrice": "0.00",
                "cumExecFee": "0",
                "leavesQty": "0",
                "closeOnTrigger": false,
                "stopLoss": "1000",
                "marketUnit": "",
                "slippageTolerance": "",
                "triggerBy": ""
            },
            {
                "symbol": "ETHUSDT",
                "orderType": "Limit",
                "orderLinkId": "1769482217140",
                "slLimitPrice": "0",
                "orderId": "2136966157654433024",
                "stopOrderType": "",
                "takeProfit": "3000",
                "smpType": "None",
                "rejectReason": "EC_PerCancelRequest",
                "price": "2000.11",
                "orderIv": "",
                "createdTime": "1769482217448",
                "tpTriggerBy": "",
                "positionIdx": 0,
                "timeInForce": "GTC",
                "leavesValue": "0",
                "basePrice": "2000.11",
                "updatedTime": "1769482464107",
                "smpGroup": 0,
                "tpLimitPrice": "0",
                "trailingValue": "0",
                "slTriggerBy": "",
                "slippageToleranceType": "UNKNOWN",
                "placeType": "",
                "cumExecQty": "0",
                "reduceOnly": false,
                "activationPrice": "0",
                "qty": "1.0000",
                "smpOrderId": "",
                "extraFees": "",
                "cancelType": "CancelByUser",
                "avgPrice": "",
                "lastPriceOnCreated": "",
                "orderStatus": "Cancelled",
                "cumExecValue": "0.000000",
                "triggerDirection": 0,
                "blockTradeId": "",
                "cumFeeDetail": {},
                "isLeverage": "0",
                "trailingPercentage": "0",
                "side": "Buy",
                "triggerPrice": "0.00",
                "cumExecFee": "0",
                "leavesQty": "0",
                "closeOnTrigger": false,
                "stopLoss": "1000",
                "marketUnit": "",
                "slippageTolerance": "",
                "triggerBy": ""
            },
            {
                "symbol": "ETHUSDT",
                "orderType": "Limit",
                "orderLinkId": "1769163203238",
                "slLimitPrice": "0",
                "orderId": "2134290074530356480",
                "stopOrderType": "",
                "takeProfit": "0",
                "smpType": "None",
                "rejectReason": "EC_PerCancelRequest",
                "price": "3006.00",
                "orderIv": "",
                "createdTime": "1769163203480",
                "tpTriggerBy": "",
                "positionIdx": 0,
                "timeInForce": "GTC",
                "leavesValue": "0",
                "basePrice": "3002",
                "updatedTime": "1769397678460",
                "smpGroup": 0,
                "tpLimitPrice": "0",
                "trailingValue": "0",
                "slTriggerBy": "",
                "slippageToleranceType": "UNKNOWN",
                "placeType": "",
                "cumExecQty": "0",
                "reduceOnly": false,
                "activationPrice": "0",
                "qty": "3.0000",
                "smpOrderId": "",
                "extraFees": "",
                "cancelType": "CancelByUser",
                "avgPrice": "",
                "lastPriceOnCreated": "",
                "orderStatus": "Cancelled",
                "cumExecValue": "0.000000",
                "triggerDirection": 0,
                "blockTradeId": "",
                "cumFeeDetail": {},
                "isLeverage": "0",
                "trailingPercentage": "0",
                "side": "Sell",
                "triggerPrice": "0.00",
                "cumExecFee": "0",
                "leavesQty": "0",
                "closeOnTrigger": false,
                "stopLoss": "0",
                "marketUnit": "",
                "slippageTolerance": "",
                "triggerBy": ""
            },
            {
                "symbol": "ETHUSDT",
                "orderType": "Limit",
                "orderLinkId": "1769163198109",
                "slLimitPrice": "0",
                "orderId": "2134290031538740480",
                "stopOrderType": "",
                "takeProfit": "0",
                "smpType": "None",
                "rejectReason": "EC_PerCancelRequest",
                "price": "3004.00",
                "orderIv": "",
                "createdTime": "1769163198355",
                "tpTriggerBy": "",
                "positionIdx": 0,
                "timeInForce": "GTC",
                "leavesValue": "0",
                "basePrice": "3001",
                "updatedTime": "1769397678460",
                "smpGroup": 0,
                "tpLimitPrice": "0",
                "trailingValue": "0",
                "slTriggerBy": "",
                "slippageToleranceType": "UNKNOWN",
                "placeType": "",
                "cumExecQty": "0",
                "reduceOnly": false,
                "activationPrice": "0",
                "qty": "0.1000",
                "smpOrderId": "",
                "extraFees": "",
                "cancelType": "CancelByUser",
                "avgPrice": "",
                "lastPriceOnCreated": "",
                "orderStatus": "Cancelled",
                "cumExecValue": "0.000000",
                "triggerDirection": 0,
                "blockTradeId": "",
                "cumFeeDetail": {},
                "isLeverage": "0",
                "trailingPercentage": "0",
                "side": "Sell",
                "triggerPrice": "0.00",
                "cumExecFee": "0",
                "leavesQty": "0",
                "closeOnTrigger": false,
                "stopLoss": "0",
                "marketUnit": "",
                "slippageTolerance": "",
                "triggerBy": ""
            },
            {
                "symbol": "ETHUSDT",
                "orderType": "Limit",
                "orderLinkId": "1769163190446",
                "slLimitPrice": "0",
                "orderId": "2134289967802096896",
                "stopOrderType": "",
                "takeProfit": "0",
                "smpType": "None",
                "rejectReason": "EC_PerCancelRequest",
                "price": "3003.00",
                "orderIv": "",
                "createdTime": "1769163190757",
                "tpTriggerBy": "",
                "positionIdx": 0,
                "timeInForce": "GTC",
                "leavesValue": "0",
                "basePrice": "3001",
                "updatedTime": "1769397678460",
                "smpGroup": 0,
                "tpLimitPrice": "0",
                "trailingValue": "0",
                "slTriggerBy": "",
                "slippageToleranceType": "UNKNOWN",
                "placeType": "",
                "cumExecQty": "0",
                "reduceOnly": false,
                "activationPrice": "0",
                "qty": "0.1000",
                "smpOrderId": "",
                "extraFees": "",
                "cancelType": "CancelByUser",
                "avgPrice": "",
                "lastPriceOnCreated": "",
                "orderStatus": "Cancelled",
                "cumExecValue": "0.000000",
                "triggerDirection": 0,
                "blockTradeId": "",
                "cumFeeDetail": {},
                "isLeverage": "0",
                "trailingPercentage": "0",
                "side": "Sell",
                "triggerPrice": "0.00",
                "cumExecFee": "0",
                "leavesQty": "0",
                "closeOnTrigger": false,
                "stopLoss": "0",
                "marketUnit": "",
                "slippageTolerance": "",
                "triggerBy": ""
            },
            {
                "symbol": "ETHUSDT",
                "orderType": "Limit",
                "orderLinkId": "1769163185494",
                "slLimitPrice": "0",
                "orderId": "2134289925833891072",
                "stopOrderType": "",
                "takeProfit": "0",
                "smpType": "None",
                "rejectReason": "EC_PerCancelRequest",
                "price": "3002.00",
                "orderIv": "",
                "createdTime": "1769163185755",
                "tpTriggerBy": "",
                "positionIdx": 0,
                "timeInForce": "GTC",
                "leavesValue": "265.376800",
                "basePrice": "3001",
                "updatedTime": "1769397678461",
                "smpGroup": 0,
                "tpLimitPrice": "0",
                "trailingValue": "0",
                "slTriggerBy": "",
                "slippageToleranceType": "UNKNOWN",
                "placeType": "",
                "cumExecQty": "0.0116",
                "reduceOnly": false,
                "activationPrice": "0",
                "qty": "0.1000",
                "smpOrderId": "",
                "extraFees": "",
                "cancelType": "CancelByUser",
                "avgPrice": "3002",
                "lastPriceOnCreated": "",
                "orderStatus": "PartiallyFilledCanceled",
                "cumExecValue": "34.823200",
                "triggerDirection": 0,
                "blockTradeId": "",
                "cumFeeDetail": {
                    "USDT": "0.0348232"
                },
                "isLeverage": "0",
                "trailingPercentage": "0",
                "side": "Sell",
                "triggerPrice": "0.00",
                "cumExecFee": "0.0348232",
                "leavesQty": "0.0884",
                "closeOnTrigger": false,
                "stopLoss": "0",
                "marketUnit": "",
                "slippageTolerance": "",
                "triggerBy": ""
            },
            {
                "symbol": "ETHUSDT",
                "orderType": "Limit",
                "orderLinkId": "1769163173079",
                "slLimitPrice": "0",
                "orderId": "2134289851821202688",
                "stopOrderType": "",
                "takeProfit": "0",
                "smpType": "None",
                "rejectReason": "EC_PerCancelRequest",
                "price": "3010.00",
                "orderIv": "",
                "createdTime": "1769163176932",
                "tpTriggerBy": "",
                "positionIdx": 0,
                "timeInForce": "GTC",
                "leavesValue": "0",
                "basePrice": "3001",
                "updatedTime": "1769397678461",
                "smpGroup": 0,
                "tpLimitPrice": "0",
                "trailingValue": "0",
                "slTriggerBy": "",
                "slippageToleranceType": "UNKNOWN",
                "placeType": "",
                "cumExecQty": "0",
                "reduceOnly": false,
                "activationPrice": "0",
                "qty": "0.1000",
                "smpOrderId": "",
                "extraFees": "",
                "cancelType": "CancelByUser",
                "avgPrice": "",
                "lastPriceOnCreated": "",
                "orderStatus": "Cancelled",
                "cumExecValue": "0.000000",
                "triggerDirection": 0,
                "blockTradeId": "",
                "cumFeeDetail": {},
                "isLeverage": "0",
                "trailingPercentage": "0",
                "side": "Sell",
                "triggerPrice": "0.00",
                "cumExecFee": "0",
                "leavesQty": "0",
                "closeOnTrigger": false,
                "stopLoss": "0",
                "marketUnit": "",
                "slippageTolerance": "",
                "triggerBy": ""
            },
            {
                "symbol": "ETHUSDT",
                "orderType": "Limit",
                "orderLinkId": "1769163107840",
                "slLimitPrice": "0",
                "orderId": "2134289274911464704",
                "stopOrderType": "",
                "takeProfit": "0",
                "smpType": "None",
                "rejectReason": "EC_PerCancelRequest",
                "price": "3001.00",
                "orderIv": "",
                "createdTime": "1769163108158",
                "tpTriggerBy": "",
                "positionIdx": 0,
                "timeInForce": "GTC",
                "leavesValue": "0",
                "basePrice": "3001",
                "updatedTime": "1769397678461",
                "smpGroup": 0,
                "tpLimitPrice": "0",
                "trailingValue": "0",
                "slTriggerBy": "",
                "slippageToleranceType": "UNKNOWN",
                "placeType": "",
                "cumExecQty": "0",
                "reduceOnly": false,
                "activationPrice": "0",
                "qty": "1.0000",
                "smpOrderId": "",
                "extraFees": "",
                "cancelType": "CancelByUser",
                "avgPrice": "",
                "lastPriceOnCreated": "",
                "orderStatus": "Cancelled",
                "cumExecValue": "0.000000",
                "triggerDirection": 0,
                "blockTradeId": "",
                "cumFeeDetail": {},
                "isLeverage": "0",
                "trailingPercentage": "0",
                "side": "Buy",
                "triggerPrice": "0.00",
                "cumExecFee": "0",
                "leavesQty": "0",
                "closeOnTrigger": false,
                "stopLoss": "0",
                "marketUnit": "",
                "slippageTolerance": "",
                "triggerBy": ""
            }
        ]
    },
    "retExtInfo": {},
    "time": 1769491101691
}
```
